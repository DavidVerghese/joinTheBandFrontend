{"ast":null,"code":"import _defineProperty from\"/Users/joeverghese/2023/joinTheBand/joinTheBand/jointheband/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/joeverghese/2023/joinTheBand/joinTheBand/jointheband/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/joeverghese/2023/joinTheBand/joinTheBand/jointheband/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{useState}from'react';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import{useHistory}from\"react-router-dom\";import Cookies from'universal-cookie';function Login(_ref){var baseURL=_ref.baseURL,user=_ref.user,setUser=_ref.setUser;var cookies=new Cookies();var history=useHistory();var _useState=useState({name:'no user'}),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState({username:\"\",password:\"\",email_address:\"\",picture_url:\"\",genre:\"\",instrument:\"\",location:\"\",looking_for:\"\"}),_useState4=_slicedToArray(_useState3,2),newUser=_useState4[0],setNewUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),loginErrors=_useState6[0],setLoginErrors=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),toggle=_useState8[0],setToggle=_useState8[1];function meTest(){var id=cookies.get('user_id');fetch(\"\".concat(baseURL,\"/lookup/\").concat(id)).then(function(response){return response.json();}).then(function(data){setCurrentUser(data);console.log(data);});}var handleSubmitLogin=function handleSubmitLogin(e){e.preventDefault();fetch(\"\".concat(baseURL,\"/login\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Accept\":\"application/json\"},body:JSON.stringify({name:newUser.username,password:newUser.password})}).then(function(resp){if(resp.ok){resp.json().then(function(data){setLoginErrors([]);console.log(data);setCurrentUser(data);setToggle(!toggle);// cookies.set('user_idd', 's', { path: '/' });\nsetUser(data);history.push(\"/profiles\");// setUser(data);\n// handleCurrentUser(data)\n// navigate('/')\n});}else{resp.json().then(function(json){return setLoginErrors(json.errors);});}});};var handleChange=function handleChange(e){setNewUser(_objectSpread(_objectSpread({},newUser),{},_defineProperty({},e.target.name,e.target.value)));};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-or-signup\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"current user: \",currentUser.name]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:meTest,children:\"run /me\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmitLogin,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Log in\"}),loginErrors.map(function(loginError){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"em\",{children:loginError}),/*#__PURE__*/_jsx(\"br\",{})]});}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter your username\",name:\"username\",value:newUser.username,onChange:handleChange})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",name:\"password\",value:newUser.password,onChange:handleChange})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Submit\"})]})]});}export default Login;","map":{"version":3,"sources":["/Users/joeverghese/2023/joinTheBand/joinTheBand/jointheband/src/components/Login.jsx"],"names":["useState","Form","Button","useHistory","Cookies","Login","baseURL","user","setUser","cookies","history","name","currentUser","setCurrentUser","username","password","email_address","picture_url","genre","instrument","location","looking_for","newUser","setNewUser","loginErrors","setLoginErrors","toggle","setToggle","meTest","id","get","fetch","then","response","json","data","console","log","handleSubmitLogin","e","preventDefault","method","headers","body","JSON","stringify","resp","ok","push","errors","handleChange","target","value","map","loginError"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { useHistory } from \"react-router-dom\";\nimport Cookies from 'universal-cookie';\n\nfunction Login({baseURL,user,setUser }) {\n\n  const cookies = new Cookies();\n  let history = useHistory();\n\n  const [currentUser, setCurrentUser] = useState({ name: 'no user' })\n  const [newUser, setNewUser] = useState({\n    username: \"\",\n    password: \"\",\n    email_address: \"\", \n    picture_url: \"\",\n    genre: \"\",                                            \n    instrument: \"\",                                        \n    location: \"\", \n    looking_for: \"\"\n  });\n  const [loginErrors, setLoginErrors] = useState([]);\n \n  const [toggle,setToggle] = useState(false)\n\n  function meTest() {\n    const id = cookies.get('user_id');\n    fetch(`${baseURL}/lookup/${id}`)\n      .then((response) => response.json())\n      .then((data) => {\n        setCurrentUser(data);\n        console.log(data);\n      });\n  }\n  \n\n  const handleSubmitLogin = e => {\n\n    e.preventDefault();\n\n    fetch(`${baseURL}/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify({name:newUser.username,password: newUser.password}),\n     \n    }).then(resp => {\n      if(resp.ok){\n        resp.json().then(data => {\n\n          setLoginErrors([])\n          console.log(data); \n          setCurrentUser(data);\n          setToggle(!toggle)\n   \n    \n          // cookies.set('user_idd', 's', { path: '/' });\n          setUser(data);\n          history.push(\"/profiles\");\n          // setUser(data);\n            // handleCurrentUser(data)\n            // navigate('/')\n         })\n      }else {\n         resp.json().then(json => setLoginErrors(json.errors))\n      }\n   })\n\n  }  \n\n\n  \n\n  const handleChange = e => {\n    setNewUser({\n      ...newUser,\n      [e.target.name]: e.target.value\n    })\n  }\n\n\n  return <div className=\"login-or-signup\">\n    <p>current user: {currentUser.name}</p>\n    <Button variant=\"primary\" onClick={meTest}>run /me</Button>\n\n    <Form  onSubmit={handleSubmitLogin}>\n      <h2>Log in</h2>\n      {loginErrors.map((loginError) => <><em>{loginError}</em><br></br></>)}\n      <Form.Group className=\"mb-3\">\n        <Form.Label>Username</Form.Label>\n        <Form.Control type=\"text\" placeholder=\"Enter your username\" name=\"username\" value={newUser.username} onChange={handleChange}/>\n      </Form.Group>\n\n      <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\n        <Form.Label>Password</Form.Label>\n        <Form.Control type=\"password\" placeholder=\"Password\"  name=\"password\"  value={newUser.password} onChange={ handleChange } />\n      </Form.Group>\n      <Button variant=\"primary\" type=\"submit\">\n        Submit\n      </Button>\n    </Form>\n  \n    \n    \n  </div>\n}\nexport default Login;"]},"metadata":{},"sourceType":"module"}